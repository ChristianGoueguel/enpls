<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="enpls">
<title>A Brief Introduction to enpls • enpls</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A Brief Introduction to enpls">
<meta property="og:description" content="enpls">
<meta property="og:image" content="https://nanx.me/enpls/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">enpls</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">6.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/enpls.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nanxstats/enpls/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">

<div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>A Brief Introduction to enpls</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nanxstats/enpls/blob/HEAD/vignettes/enpls.Rmd" class="external-link"><code>vignettes/enpls.Rmd</code></a></small>
      <div class="d-none name"><code>enpls.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>enpls</code> package offers an algorithmic framework for measuring feature importance, detecting outliers, and ensemble modeling based on (sparse) partial least squares regression. The key functions included in the package are listed in the table below.</p>
<table class="table">
<colgroup>
<col width="37%">
<col width="27%">
<col width="35%">
</colgroup>
<thead><tr class="header">
<th>Task</th>
<th>Partial Least Squares</th>
<th>Sparse Partial Least Squares</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Model fitting</td>
<td><code><a href="../reference/enpls.fit.html">enpls.fit()</a></code></td>
<td><code><a href="../reference/enspls.fit.html">enspls.fit()</a></code></td>
</tr>
<tr class="even">
<td>Cross validation</td>
<td><code><a href="../reference/cv.enpls.html">cv.enpls()</a></code></td>
<td><code><a href="../reference/cv.enspls.html">cv.enspls()</a></code></td>
</tr>
<tr class="odd">
<td>Detect outliers</td>
<td><code><a href="../reference/enpls.od.html">enpls.od()</a></code></td>
<td><code><a href="../reference/enspls.od.html">enspls.od()</a></code></td>
</tr>
<tr class="even">
<td>Measure feature importance</td>
<td><code><a href="../reference/enpls.fs.html">enpls.fs()</a></code></td>
<td><code><a href="../reference/enspls.fs.html">enspls.fs()</a></code></td>
</tr>
<tr class="odd">
<td>Evaluate applicability domain</td>
<td><code><a href="../reference/enpls.ad.html">enpls.ad()</a></code></td>
<td><code><a href="../reference/enspls.ad.html">enspls.ad()</a></code></td>
</tr>
</tbody>
</table>
<p>Next, we will use the data from <span class="citation">(Wang et al. 2015)</span> to demonstrate the general workflow of <code>enpls</code>. The dataset contains 1,000 compounds, each characterized by 80 molecular descriptors. The response is the octanol/water partition coefficient at pH 7.4 (logD7.4).</p>
<p>Let’s load the data and take a look at it:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://nanx.me/enpls/">"enpls"</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://ggplot2.tidyverse.org" class="external-link">"ggplot2"</a></span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"logd1k"</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="va">logd1k</span><span class="op">$</span><span class="va">x</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="va">logd1k</span><span class="op">$</span><span class="va">y</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>
<span class="co">#&gt;   BalabanJ  BertzCT   Chi0  Chi0n  Chi0v</span>
<span class="co">#&gt; 1    1.949  882.760 16.845 13.088 13.088</span>
<span class="co">#&gt; 2    1.970  781.936 15.905 13.204 14.021</span>
<span class="co">#&gt; 3    2.968  343.203  9.845  7.526  7.526</span>
<span class="co">#&gt; 4    2.050 1133.679 19.836 15.406 15.406</span>
<span class="co">#&gt; 5    2.719  437.346 12.129  9.487  9.487</span>
<span class="co">#&gt; 6    2.031  983.304 19.292 15.289 15.289</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>
<span class="co">#&gt; [1] -0.96 -0.92 -0.90 -0.83 -0.82 -0.79</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="model-fitting">Model fitting<a class="anchor" aria-label="anchor" href="#model-fitting"></a>
</h2>
<p>Here we fit the ensemble sparse partial least squares to the data, so that the model complexity could usually be further reduced than vanilla partial least squares when we build each model.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span>
<span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/enspls.fit.html">enspls.fit</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, ratio <span class="op">=</span> <span class="fl">0.7</span>, reptimes <span class="op">=</span> <span class="fl">20</span>, maxcomp <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="va">y.pred</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit</span>, newx <span class="op">=</span> <span class="va">x</span><span class="op">)</span>

<span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">y</span>, <span class="va">y.pred</span><span class="op">)</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_.html" class="external-link">aes_string</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"y"</span>, y <span class="op">=</span> <span class="st">"y.pred"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_abline</a></span><span class="op">(</span>slope <span class="op">=</span> <span class="fl">1</span>, intercept <span class="op">=</span> <span class="fl">0</span>, colour <span class="op">=</span> <span class="st">"darkgrey"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">3</span>, shape <span class="op">=</span> <span class="fl">1</span>, alpha <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_fixed</a></span><span class="op">(</span>ratio <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">xlab</a></span><span class="op">(</span><span class="st">"Observed Response"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="st">"Predicted Response"</span><span class="op">)</span></code></pre></div>
<p><img src="enpls_files/figure-html/unnamed-chunk-3-1.png" width="600" height="600"></p>
<p>We used the fitted model to predict on the training data and plotted the predicted values against the true values.</p>
<p>The parameter <code>ratio</code> decides the sampling ratio for each Monte-Carlo run; <code>maxcomp</code> controls the maximum number of components included within each model; <code>reptimes</code> sets the times of Monte-Carlo resampling, we recommend setting it to a large number (500 by default).</p>
<p>One common parameter for all functions in <code>enpls</code> is <code>parallel</code>, it controls the number of CPU cores to use if you want to train the models in parallel.</p>
</div>
<div class="section level2">
<h2 id="cross-validation">Cross validation<a class="anchor" aria-label="anchor" href="#cross-validation"></a>
</h2>
<p>K-fold cross validation is a traditional way to measure the empirical predictive performance of the model. We can use function <code><a href="../reference/cv.enpls.html">cv.enpls()</a></code> or <code><a href="../reference/cv.enspls.html">cv.enspls()</a></code> to perform <span class="math inline">\(k\)</span>-fold cross validation for the ensemble (sparse) partial least squares model.</p>
<p>Since the parameters (number of components and level of sparsity) are automatically tuned for each model in <code>enpls</code>, the cross validation here is used to see if certain combinations of parameters (specified by <code>ratio</code>, <code>maxcomp</code>, <code>alpha</code>, etc.) can produce ensemble models with better performance.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cv.fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cv.enspls.html">cv.enspls</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>,
  nfolds <span class="op">=</span> <span class="fl">5</span>, ratio <span class="op">=</span> <span class="fl">0.7</span>,
  reptimes <span class="op">=</span> <span class="fl">10</span>, maxcomp <span class="op">=</span> <span class="fl">3</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span>
<span class="va">cv.fit</span>
<span class="co">#&gt; Cross Validation Result for Ensemble Sparse Partial Least Squares</span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt; RMSE = 1.1410</span>
<span class="co">#&gt; MAE = 0.913153</span>
<span class="co">#&gt; Rsquare = 0.587959</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cv.fit</span><span class="op">)</span></code></pre></div>
<p><img src="enpls_files/figure-html/unnamed-chunk-4-1.png" width="600" height="600"></p>
<p>The returned object gives three model performance evaluation metrics for the ensemble model: RMSE, MAE, and <span class="math inline">\(R^2\)</span>. Here we also plotted the predicted values for each test fold against the true response.</p>
</div>
<div class="section level2">
<h2 id="feature-importance">Feature importance<a class="anchor" aria-label="anchor" href="#feature-importance"></a>
</h2>
<p>To measure feature importance, simply use <code><a href="../reference/enpls.fs.html">enpls.fs()</a></code> or <code><a href="../reference/enspls.fs.html">enspls.fs()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/enspls.fs.html">enspls.fs</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, ratio <span class="op">=</span> <span class="fl">0.7</span>, reptimes <span class="op">=</span> <span class="fl">20</span>, maxcomp <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fs</span>, nvar <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="co">#&gt; Variable Importance by Ensemble Sparse Partial Least Squares</span>
<span class="co">#&gt; ---</span>
<span class="co">#&gt;                     Importance</span>
<span class="co">#&gt; Chi1n                 29.48614</span>
<span class="co">#&gt; NumValenceElectrons   26.78683</span>
<span class="co">#&gt; HeavyAtomCount        23.28745</span>
<span class="co">#&gt; Chi1                  21.39361</span>
<span class="co">#&gt; LabuteASA             21.27471</span>
<span class="co">#&gt; SlogP_VSA2            20.93239</span>
<span class="co">#&gt; Chi0n                 20.54714</span>
<span class="co">#&gt; SlogP_VSA5            19.89059</span>
<span class="co">#&gt; MolMR                 19.82387</span>
<span class="co">#&gt; SMR_VSA5              19.19199</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fs</span>, nvar <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<p><img src="enpls_files/figure-html/unnamed-chunk-5-1.png" width="600" height="600"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fs</span>, type <span class="op">=</span> <span class="st">"boxplot"</span>, nvar <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<p><img src="enpls_files/figure-html/unnamed-chunk-5-2.png" width="600" height="600"></p>
<p>The top 10 most important features are ranked as above. The boxplot gives additional information about the coefficient stability of each feature. We can see the feature TPSA (Topological Polar Surface Area) has different pattern compared to others: it has large effect size, but the effect sizes also have a large variance. This indicates that TPSA is important for predicting logD7.4. However, such importance may vary on different subsets of the samples.</p>
</div>
<div class="section level2">
<h2 id="outlier-detection">Outlier detection<a class="anchor" aria-label="anchor" href="#outlier-detection"></a>
</h2>
<p>By using information from the prediction error distribution for each sample produced by many models, we can measure if the responses of particular samples are harder to predict than the others. Such measurements can help on identifying outliers in the dataset. Thus, they can be removed to get us a “clean” dataset before the actual modeling.</p>
<p>This could be done with <code><a href="../reference/enpls.od.html">enpls.od()</a></code>, <code><a href="../reference/enspls.od.html">enspls.od()</a></code> easily:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">od</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/enspls.od.html">enspls.od</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, ratio <span class="op">=</span> <span class="fl">0.8</span>, reptimes <span class="op">=</span> <span class="fl">20</span>, maxcomp <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">od</span>, prob <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></code></pre></div>
<p><img src="enpls_files/figure-html/unnamed-chunk-6-1.png" width="600" height="600"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">od</span>, criterion <span class="op">=</span> <span class="st">"sd"</span>, sdtimes <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="enpls_files/figure-html/unnamed-chunk-6-2.png" width="600" height="600"></p>
<p>The two plots showed that several samples in our dataset might be outlier candidates, based on two different criterions. The samples in each area of the plots represent different types of outliers.</p>
</div>
<div class="section level2">
<h2 id="applicability-domain-evaluation">Applicability domain evaluation<a class="anchor" aria-label="anchor" href="#applicability-domain-evaluation"></a>
</h2>
<p>Model applicability domain measures how well the predictive model (PLS/Sparse PLS model) we built on the training set performs on external test sets. A certain type of perturbation (such as bootstrapping, jackknifing) is applied to the samples or the variables of the training set, and we could get many different predictions for all samples in all test sets (and of course, including the training set) using each sub-model built with each perturbated training set. The general evaluation strategy design and comparisons were analyzed in <span class="citation">Kaneko and Funatsu (2014)</span>.</p>
<p>The functions <code><a href="../reference/enpls.ad.html">enpls.ad()</a></code> and <code><a href="../reference/enspls.ad.html">enspls.ad()</a></code> could help us evaluate the model applicability domain. Here we constructed two “pseudo” test sets from the original <code>logd1k</code> dataset for demonstration:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># remove low variance variables</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">17</span>, <span class="fl">52</span>, <span class="fl">59</span><span class="op">)</span><span class="op">]</span>

<span class="co"># make training set</span>
<span class="va">x.tr</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">500</span>, <span class="op">]</span>
<span class="va">y.tr</span> <span class="op">&lt;-</span> <span class="va">y</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">500</span><span class="op">]</span>

<span class="co"># make two test sets</span>
<span class="va">x.te</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
  <span class="st">"test.1"</span> <span class="op">=</span> <span class="va">x</span><span class="op">[</span><span class="fl">501</span><span class="op">:</span><span class="fl">700</span>, <span class="op">]</span>,
  <span class="st">"test.2"</span> <span class="op">=</span> <span class="va">x</span><span class="op">[</span><span class="fl">701</span><span class="op">:</span><span class="fl">800</span>, <span class="op">]</span>
<span class="op">)</span>
<span class="va">y.te</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
  <span class="st">"test.1"</span> <span class="op">=</span> <span class="va">y</span><span class="op">[</span><span class="fl">501</span><span class="op">:</span><span class="fl">700</span><span class="op">]</span>,
  <span class="st">"test.2"</span> <span class="op">=</span> <span class="va">y</span><span class="op">[</span><span class="fl">701</span><span class="op">:</span><span class="fl">800</span><span class="op">]</span>
<span class="op">)</span>

<span class="va">ad</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/enspls.ad.html">enspls.ad</a></span><span class="op">(</span><span class="va">x.tr</span>, <span class="va">y.tr</span>, <span class="va">x.te</span>, <span class="va">y.te</span>,
  maxcomp <span class="op">=</span> <span class="fl">3</span>, space <span class="op">=</span> <span class="st">"variable"</span>, method <span class="op">=</span> <span class="st">"mc"</span>,
  ratio <span class="op">=</span> <span class="fl">0.8</span>, reptimes <span class="op">=</span> <span class="fl">50</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ad</span><span class="op">)</span></code></pre></div>
<p><img src="enpls_files/figure-html/unnamed-chunk-7-1.png" width="600" height="600"></p>
<p>Additionally, by using</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ad</span>, type <span class="op">=</span> <span class="st">"interactive"</span><span class="op">)</span></code></pre></div>
<p>we will get an interactive plot, which could help us better explore the model applicability domain by supporting zooming-in / inspecting which sample each point represents interactively. The interactive plot is based on <a href="https://cran.r-project.org/package=plotly" class="external-link">plotly</a>, and it only requires an HTML viewer to be correctly rendered.</p>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>Ensemble learning approaches are not only powerful for improving base learner’s predictive performance but also capable of accomplishing model diagnostic tasks, such as measuring the importance of features. It would be interesting to see if such ideas could be applied to more relevant topics and further facilitate the predictive modeling tasks.</p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-kaneko2014applicability" class="csl-entry">
Kaneko, Hiromasa, and Kimito Funatsu. 2014. <span>“Applicability Domain Based on Ensemble Learning in Classification and Regression Analyses.”</span> <em>Journal of Chemical Information and Modeling</em> 54 (9): 2469–82.
</div>
<div id="ref-wang2015silico" class="csl-entry">
Wang, Jian-Bing, Dong-Sheng Cao, Min-Feng Zhu, Yong-Huan Yun, Nan Xiao, and Yi-Zeng Liang. 2015. <span>“In Silico Evaluation of logD7.4 and Comparison with Other Prediction Methods.”</span> <em>Journal of Chemometrics</em> 29 (7): 389–98.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Nan Xiao, Dong-Sheng Cao, Miao-Zhu Li, Qing-Song Xu.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.1.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
